<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <style>
    body {
      margin: 0;
      padding: 0;
      overflow: auto; 
      background:white;
    }
    #notation svg {
      width: 100%;
      height: auto;
      display: block;
    }
  </style>
  <script src="https://www.verovio.org/javascript/latest/verovio-toolkit-wasm.js"></script>
  <style>
    body { margin: 0; padding: 0;
    background: white; }
  </style>
</head>
<body>
  <div id="notation"></div>

  <script>
    const data = `{{MUSICXML_DATA}}`;

    verovio.module.onRuntimeInitialized = () => {
      const tk = new verovio.toolkit();

      tk.setOptions({
        scale: 40,
        adjustPageWidth: true,
        footer: "none",
        header: "none",
      });

      try {
        tk.loadData(data);
        const pages = tk.getPageCount();

        let allSvg = "";
        for (let p = 1; p <= pages; p++) {
          const svg = tk.renderToSVG(p);
          allSvg += svg;
        }

        document.getElementById("notation").innerHTML = allSvg;

      } catch (e) {
        document.getElementById("notation").innerHTML =
          "<p style='color:red;'>Render error: " + e + "</p>";
      }
    };
  </script>
</body>
</html>
